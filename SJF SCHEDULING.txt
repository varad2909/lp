#include <iostream>
#include <algorithm>
#include <iomanip>
using namespace std;

struct Process {
    int pid;  // Process ID
    int at;   // Arrival Time
    int bt;   // Burst Time
    int ct;   // Completion Time
    int tat;  // Turnaround Time
    int wt;   // Waiting Time
};

// Sort by Burst Time (SJF)
bool compareBurstTime(const Process &a, const Process &b) {
    return a.bt < b.bt;
}

int main() {
    int n;
    float avg_tat = 0, avg_wt = 0;

    cout << "Enter the number of processes: ";
    cin >> n;

    Process p[20];

    cout << "Enter Arrival Time for " << n << " processes:\n";
    for (int i = 0; i < n; i++) {
        cout << "P" << i + 1 << ": ";
        cin >> p[i].at;
        p[i].pid = i + 1;
    }

    cout << "Enter Burst Time for " << n << " processes:\n";
    for (int i = 0; i < n; i++) {
        cout << "P" << i + 1 << ": ";
        cin >> p[i].bt;
    }

    // Sort processes based on Burst Time (SJF)
    sort(p, p + n, compareBurstTime);

    // Calculate Completion Time (CT)
    int currentTime = 0;
    for (int i = 0; i < n; i++) {
        if (p[i].at > currentTime)
            currentTime = p[i].at;
        currentTime += p[i].bt;
        p[i].ct = currentTime;
    }

    // Calculate Turnaround Time (TAT) and Waiting Time (WT)
    for (int i = 0; i < n; i++) {
        p[i].tat = p[i].ct - p[i].at;
        p[i].wt = p[i].tat - p[i].bt;
        avg_tat += p[i].tat;
        avg_wt += p[i].wt;
    }

    // Print table
    cout << "\n==============================================\n";
    cout << "Process\tAT\tBT\tCT\tTAT\tWT\n";
    cout << "==============================================\n";
    for (int i = 0; i < n; i++) {
        cout << "P" << p[i].pid << "\t"
             << p[i].at << "\t"
             << p[i].bt << "\t"
             << p[i].ct << "\t"
             << p[i].tat << "\t"
             << p[i].wt << endl;
    }
    cout << "==============================================\n";
    cout << fixed << setprecision(2);
    cout << "Average Turnaround Time: " << (avg_tat / n) << endl;
    cout << "Average Waiting Time:    " << (avg_wt / n) << endl;

    return 0;
}

/*SAMPLE INPUT:-
		Enter the number of processes: 4
Enter Arrival Time for 4 processes:
P1: 0
P2: 1
P3: 2
P4: 3
Enter Burst Time for 4 processes:
P1: 5
P2: 3
P3: 8
P4: 6*/


/*SAMPLE OUTPUT:-
		==============================================
Process	AT	BT	CT	TAT	WT
==============================================
P2	1	3	4	3	0
P4	3	6	10	7	1
P1	0	5	15	15	10
P3	2	8	23	21	13
==============================================
Average Turnaround Time: 11.50
Average Waiting Time:    6.00*/